--- branches/response_parsing/Apache/Solr/Service.php
+++ branches/response_parsing/Apache/Solr/Service.php
@@ -828,6 +828,26 @@
 
 		return $this->_sendRawPost($this->_updateUrl, $rawPost, $timeout);
 	}
+   
+   /**
+	 * Send a commit command for solr version 4.x.  Will be synchronous unless both wait parameters are set to false.
+	 *
+	 * @param boolean $expungeDeletes Defaults to false, merge segments with deletes away
+	 * @param boolean $waitSearcher Defaults to true, block until a new searcher is opened and registered as the main query searcher, making the changes visible
+	 * @param float $timeout Maximum expected duration (in seconds) of the commit operation on the server (otherwise, will throw a communication exception). Defaults to 1 hour
+	 * @return Apache_Solr_Response
+	 *
+	 * @throws Apache_Solr_HttpTransportException If an error occurs during the service call
+	 */
+	public function commit4($expungeDeletes = false, $waitSearcher = true, $timeout = 3600)
+	{
+		$expungeValue = $expungeDeletes ? 'true' : 'false';
+		$searcherValue = $waitSearcher ? 'true' : 'false';
+
+		$rawPost = '<commit expungeDeletes="' . $expungeValue . '" waitSearcher="' . $searcherValue . '" />';
+
+		return $this->_sendRawPost($this->_updateUrl, $rawPost, $timeout);
+	}
 
 	/**
 	 * Raw Delete Method. Takes a raw post body and sends it to the update service. Body should be
@@ -1121,6 +1141,26 @@
 
 		$rawPost = '<optimize waitFlush="' . $flushValue . '" waitSearcher="' . $searcherValue . '" />';
 
+		return $this->_sendRawPost($this->_updateUrl, $rawPost, $timeout);
+	}
+   
+   
+   /**
+	 * Send an optimize command for solr 4.x.  Will be synchronous unless both wait parameters are set
+	 * to false.
+	 *
+	 * @param boolean $waitSearcher
+	 * @param float $timeout Maximum expected duration of the commit operation on the server (otherwise, will throw a communication exception)
+	 * @return Apache_Solr_Response
+	 *
+	 * @throws Apache_Solr_HttpTransportException If an error occurs during the service call
+	 */
+	public function optimize4($waitSearcher = true, $timeout = 3600)
+	{
+		$searcherValue = $waitSearcher ? 'true' : 'false';
+
+		$rawPost = '<optimize waitSearcher="' . $searcherValue . '" />';
+
 		return $this->_sendRawPost($this->_updateUrl, $rawPost, $timeout);
 	}
 
